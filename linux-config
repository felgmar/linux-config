#!/bin/sh

help()
{
    echo "Usage: $(basename $0) [-d LINUX_DISTRO]

Available distributions:"

    for d in archlinux debian ubuntu fedora
    do
        test -f "$d/$d-config" && echo "    - $d"
    done

    return 1
}

if test -z $1
then
    help
    exit 1
fi

while getopts 'a:d:' arg
do
    case "${arg}" in
        a) SCRIPT_ACTION="$OPTARG";;
        d) LINUX_DISTRO="$OPTARG";;
        *) help;;
    esac
done

case "$LINUX_DISTRO" in
    arch|archlinux)
        cd "archlinux" && \
            sh archlinux-config ${SCRIPT_ACTION} && \
            exit $? || exit 1
    ;;
    debian)
        cd "debian" && \
            sh debian-config ${SCRIPT_ACTION} && \
            exit $? || exit 1
    ;;
    ubuntu|ubuntu)
        cd "ubuntu" && \
            sh ubuntu-config ${SCRIPT_ACTION} && \
            exit $? || exit 1
    ;;
    fedora)
        cd "fedora" && \
            sh fedora-config ${SCRIPT_ACTION} && \
            exit $? || exit 1
    ;;
    *) exit 1;;
esac
