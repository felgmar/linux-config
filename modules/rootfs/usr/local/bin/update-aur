#!/usr/bin/env python3
import shutil
import subprocess
import logging
import sys

if __name__ == "__main__":
    paru_bin: str | None = shutil.which("paru")
    paru_args: list[str] = [
        "-Syuu",
        "--needed",
        "--sudoloop",
        "--aur"
    ]

    if paru_bin is None:
        raise FileNotFoundError("paru was not found")

    process = None

    cmd: list[str] = []

    cmd.append(paru_bin)
    cmd.extend(paru_args)

    try:
        logging.info("Running: {}", cmd)
        process = subprocess.run(cmd)
        process.wait()
    except Exception as e:
        raise RuntimeError("An error ocurred:", e)
    finally:
        sys.exit(process.returncode)
